<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

<img id="img"></img>
<script type="text/javascript" charset="utf-8">
    var socket = io.connect('http://localhost:5000');
    socket.on('connect', function() {
        socket.emit('setup', '');
    });
	socket.on('image', function(arg) {
		json = JSON.parse(arg)
		image = json.data;
	    image = image.substring(2);
	    image = image.slice(0, -1);
		let imgBase64 = 'data:' + json.type + ';base64,' + image;
    	$("#img1").attr("src", imgBase64)
    });

    function filter() {
    	var h = $("#h").val();
    	var s = $("#s").val();
    	var v = $("#v").val();

    	socket.emit('filter', {"h": h, "s": s, "v": v});
    }
</script>
<html>
	<head></head>
	<body>
		<div id="originalImage" style="width:400px; height:400px"><img id="img1" style="width:400px; height:400px"></div><br>

		<table>
			<tr>
				<td>
					H
				</td>
				<td>
					<input type="range" id="h" min="0" max="255" value="0" step="1" style="width:500px" oninput="h_disp.value=h.value" onchange="filter();h_disp.value=h.value">
				</td>
				<td>
					<input type="number" id="h_disp" min="0" max="255" value="0" style="width:40px" oninput="h.value=h_disp.value" onchange="filter();h.value=h_disp.value">
				</td>
			</tr>
			<tr>
				<td>
					S
				</td>
				<td>
					<input type="range" id="s" min="0" max="255" value="0" step="1" style="width:500px" oninput="s_disp.value=s.value" onchange="filter();s_disp.value=s.value">
				</td>
				<td>
					<input type="number" id="s_disp" min="0" max="255" value="0" style="width:40px" oninput="s.value=s_disp.value" onchange="filter();s.value=s_disp.value">
				</td>
			</tr>
			<tr>
				<td>
					V
				</td>
				<td>
					<input type="range" id="v" min="0" max="255" value="0" step="1" style="width:500px" oninput="v_disp.value=v.value" onchange="filter();v_disp.value=v.value">
				</td>
				<td>
					<input type="number" id="v_disp" min="0" max="255" value="0" style="width:40px" oninput="v.value=v_disp.value" onchange="filter();v.value=v_disp.value">
				</td>
			</tr>
		</table>
	</body>
</html>


